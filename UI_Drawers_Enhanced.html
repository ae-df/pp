<!--
  UI_Drawers_Enhanced.html
  Drawers Aprimorados - Alimentação Escolar CRE-PP
  @version 1.0.0
  
  Drawers do Cabeçalho (5 botões):
  1. Notificações - Alertas de NFs pendentes e cardápios
  2. Busca Global - Pesquisa rápida
  3. Calendário - Cronograma de alimentação
  4. Status de Rede - Indicador offline
  5. Perfil - Dados do usuário
  
  Drawers do Rodapé (3 botões):
  1. Resumo Financeiro - Mini dashboard
  2. Scanner QR - Leitura de NFs
  3. Suporte - Manual e ajuda
-->

<style>
/* ============================================
   DRAWER BASE
   ============================================ */
.ae-drawer-overlay {
  position: fixed;
  inset: 0;
  background: var(--ae-bg-overlay);
  z-index: var(--ae-z-modal-backdrop);
  opacity: 0;
  visibility: hidden;
  transition: all var(--ae-transition-base);
  backdrop-filter: blur(4px);
}

.ae-drawer-overlay.active {
  opacity: 1;
  visibility: visible;
}

.ae-drawer {
  position: fixed;
  background: var(--ae-bg-surface);
  z-index: var(--ae-z-modal);
  display: flex;
  flex-direction: column;
  transition: transform var(--ae-transition-slow);
  box-shadow: var(--ae-shadow-xl);
}

/* Drawer da Direita */
.ae-drawer-right {
  top: 0;
  right: 0;
  width: 380px;
  max-width: 90vw;
  height: 100vh;
  transform: translateX(100%);
}

.ae-drawer-right.active {
  transform: translateX(0);
}

/* Drawer de Baixo */
.ae-drawer-bottom {
  bottom: 0;
  left: 0;
  right: 0;
  max-height: 85vh;
  border-radius: var(--ae-radius-2xl) var(--ae-radius-2xl) 0 0;
  transform: translateY(100%);
}

.ae-drawer-bottom.active {
  transform: translateY(0);
}

/* Handle do Drawer Bottom */
.ae-drawer-handle {
  width: 40px;
  height: 4px;
  background: var(--ae-border);
  border-radius: var(--ae-radius-full);
  margin: var(--ae-space-3) auto;
}
</style>

<style>
/* Header do Drawer */
.ae-drawer-header {
  padding: var(--ae-space-4) var(--ae-space-5);
  background: var(--ae-gradient-primary);
  color: var(--ae-text-inverse);
  display: flex;
  align-items: center;
  justify-content: space-between;
  flex-shrink: 0;
}

.ae-drawer-title {
  font-size: var(--ae-font-lg);
  font-weight: 600;
  display: flex;
  align-items: center;
  gap: var(--ae-space-2);
}

.ae-drawer-close {
  width: 36px;
  height: 36px;
  border: none;
  background: rgba(255, 255, 255, 0.2);
  color: var(--ae-text-inverse);
  border-radius: var(--ae-radius-full);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: background var(--ae-transition-fast);
}

.ae-drawer-close:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* Body do Drawer */
.ae-drawer-body {
  flex: 1;
  overflow-y: auto;
  padding: var(--ae-space-4);
  -webkit-overflow-scrolling: touch;
}

/* Footer do Drawer */
.ae-drawer-footer {
  padding: var(--ae-space-4);
  border-top: 1px solid var(--ae-border-light);
  background: var(--ae-bg-secondary);
  flex-shrink: 0;
}

/* ============================================
   DRAWER DE NOTIFICAÇÕES
   ============================================ */
.ae-notification-list {
  display: flex;
  flex-direction: column;
  gap: var(--ae-space-2);
}

.ae-notification-item {
  display: flex;
  gap: var(--ae-space-3);
  padding: var(--ae-space-3);
  border-radius: var(--ae-radius-md);
  cursor: pointer;
  transition: background var(--ae-transition-fast);
  border-left: 3px solid transparent;
}

.ae-notification-item:hover {
  background: var(--ae-bg-secondary);
}

.ae-notification-item.unread {
  background: var(--ae-primary-bg);
  border-left-color: var(--ae-primary);
}

.ae-notification-icon {
  width: 40px;
  height: 40px;
  border-radius: var(--ae-radius-full);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 16px;
  flex-shrink: 0;
}

.ae-notification-icon.info { background: var(--ae-info-light); color: var(--ae-info); }
.ae-notification-icon.success { background: var(--ae-success-light); color: var(--ae-success); }
.ae-notification-icon.warning { background: var(--ae-warning-light); color: var(--ae-warning); }
.ae-notification-icon.error { background: var(--ae-error-light); color: var(--ae-error); }

.ae-notification-content {
  flex: 1;
  min-width: 0;
}

.ae-notification-title {
  font-size: var(--ae-font-sm);
  font-weight: 600;
  color: var(--ae-text-primary);
  margin-bottom: 2px;
}

.ae-notification-text {
  font-size: var(--ae-font-xs);
  color: var(--ae-text-secondary);
  line-height: 1.4;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.ae-notification-time {
  font-size: 11px;
  color: var(--ae-text-tertiary);
  margin-top: var(--ae-space-1);
}

.ae-notification-empty {
  text-align: center;
  padding: var(--ae-space-10);
  color: var(--ae-text-tertiary);
}

.ae-notification-empty i {
  font-size: 48px;
  margin-bottom: var(--ae-space-3);
  opacity: 0.5;
}

/* ============================================
   DRAWER DE BUSCA
   ============================================ */
.ae-search-container {
  padding: var(--ae-space-4);
  border-bottom: 1px solid var(--ae-border-light);
}

.ae-search-input-wrapper {
  position: relative;
}

.ae-search-input-wrapper i {
  position: absolute;
  left: var(--ae-space-4);
  top: 50%;
  transform: translateY(-50%);
  color: var(--ae-text-tertiary);
}

.ae-search-input {
  width: 100%;
  padding: var(--ae-space-3) var(--ae-space-4) var(--ae-space-3) 44px;
  border: 1px solid var(--ae-border);
  border-radius: var(--ae-radius-lg);
  font-size: 16px;
  background: var(--ae-bg-secondary);
  transition: all var(--ae-transition-fast);
}

.ae-search-input:focus {
  outline: none;
  border-color: var(--ae-primary);
  background: var(--ae-bg-surface);
  box-shadow: 0 0 0 3px rgba(46, 125, 50, 0.15);
}

.ae-search-filters {
  display: flex;
  gap: var(--ae-space-2);
  margin-top: var(--ae-space-3);
  flex-wrap: wrap;
}

.ae-search-filter {
  padding: var(--ae-space-1) var(--ae-space-3);
  background: var(--ae-bg-secondary);
  border: 1px solid var(--ae-border);
  border-radius: var(--ae-radius-full);
  font-size: var(--ae-font-xs);
  color: var(--ae-text-secondary);
  cursor: pointer;
  transition: all var(--ae-transition-fast);
}

.ae-search-filter:hover,
.ae-search-filter.active {
  background: var(--ae-primary);
  border-color: var(--ae-primary);
  color: var(--ae-text-inverse);
}

.ae-search-results {
  padding: var(--ae-space-4);
}

.ae-search-result-item {
  display: flex;
  align-items: center;
  gap: var(--ae-space-3);
  padding: var(--ae-space-3);
  border-radius: var(--ae-radius-md);
  cursor: pointer;
  transition: background var(--ae-transition-fast);
}

.ae-search-result-item:hover {
  background: var(--ae-bg-secondary);
}

.ae-search-result-icon {
  width: 40px;
  height: 40px;
  background: var(--ae-primary-bg);
  color: var(--ae-primary);
  border-radius: var(--ae-radius-md);
  display: flex;
  align-items: center;
  justify-content: center;
}

.ae-search-result-info {
  flex: 1;
}

.ae-search-result-title {
  font-size: var(--ae-font-sm);
  font-weight: 500;
  color: var(--ae-text-primary);
}

.ae-search-result-meta {
  font-size: var(--ae-font-xs);
  color: var(--ae-text-tertiary);
}
</style>

<style>
/* ============================================
   DRAWER DE CALENDÁRIO
   ============================================ */
.ae-calendar-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: var(--ae-space-4);
  border-bottom: 1px solid var(--ae-border-light);
}

.ae-calendar-nav {
  display: flex;
  align-items: center;
  gap: var(--ae-space-2);
}

.ae-calendar-nav-btn {
  width: 36px;
  height: 36px;
  border: none;
  background: var(--ae-bg-secondary);
  border-radius: var(--ae-radius-md);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all var(--ae-transition-fast);
}

.ae-calendar-nav-btn:hover {
  background: var(--ae-primary-bg);
  color: var(--ae-primary);
}

.ae-calendar-month {
  font-size: var(--ae-font-lg);
  font-weight: 600;
  color: var(--ae-text-primary);
}

.ae-calendar-grid {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  gap: 2px;
  padding: var(--ae-space-4);
}

.ae-calendar-weekday {
  text-align: center;
  font-size: var(--ae-font-xs);
  font-weight: 600;
  color: var(--ae-text-tertiary);
  padding: var(--ae-space-2);
  text-transform: uppercase;
}

.ae-calendar-day {
  aspect-ratio: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  border-radius: var(--ae-radius-md);
  cursor: pointer;
  transition: all var(--ae-transition-fast);
  font-size: var(--ae-font-sm);
  position: relative;
}

.ae-calendar-day:hover {
  background: var(--ae-bg-secondary);
}

.ae-calendar-day.today {
  background: var(--ae-primary);
  color: var(--ae-text-inverse);
  font-weight: 600;
}

.ae-calendar-day.has-event::after {
  content: '';
  position: absolute;
  bottom: 4px;
  width: 6px;
  height: 6px;
  background: var(--ae-secondary);
  border-radius: var(--ae-radius-full);
}

.ae-calendar-day.other-month {
  color: var(--ae-text-tertiary);
}

.ae-calendar-events {
  padding: var(--ae-space-4);
  border-top: 1px solid var(--ae-border-light);
}

.ae-calendar-event {
  display: flex;
  gap: var(--ae-space-3);
  padding: var(--ae-space-3);
  background: var(--ae-bg-secondary);
  border-radius: var(--ae-radius-md);
  margin-bottom: var(--ae-space-2);
  border-left: 3px solid var(--ae-primary);
}

.ae-calendar-event-time {
  font-size: var(--ae-font-xs);
  font-weight: 600;
  color: var(--ae-primary);
  white-space: nowrap;
}

.ae-calendar-event-title {
  font-size: var(--ae-font-sm);
  color: var(--ae-text-primary);
}

/* ============================================
   DRAWER DE STATUS DE REDE
   ============================================ */
.ae-network-status {
  text-align: center;
  padding: var(--ae-space-6);
}

.ae-network-icon {
  width: 80px;
  height: 80px;
  border-radius: var(--ae-radius-full);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 36px;
  margin: 0 auto var(--ae-space-4);
  transition: all var(--ae-transition-base);
}

.ae-network-icon.online {
  background: var(--ae-success-light);
  color: var(--ae-success);
}

.ae-network-icon.offline {
  background: var(--ae-error-light);
  color: var(--ae-error);
}

.ae-network-icon.syncing {
  background: var(--ae-warning-light);
  color: var(--ae-warning);
  animation: ae-pulse 1.5s ease-in-out infinite;
}

@keyframes ae-pulse {
  0%, 100% { transform: scale(1); opacity: 1; }
  50% { transform: scale(1.05); opacity: 0.8; }
}

.ae-network-title {
  font-size: var(--ae-font-xl);
  font-weight: 600;
  color: var(--ae-text-primary);
  margin-bottom: var(--ae-space-2);
}

.ae-network-description {
  font-size: var(--ae-font-sm);
  color: var(--ae-text-secondary);
  margin-bottom: var(--ae-space-6);
}

.ae-sync-queue {
  background: var(--ae-bg-secondary);
  border-radius: var(--ae-radius-lg);
  padding: var(--ae-space-4);
  text-align: left;
}

.ae-sync-queue-title {
  font-size: var(--ae-font-sm);
  font-weight: 600;
  color: var(--ae-text-primary);
  margin-bottom: var(--ae-space-3);
  display: flex;
  align-items: center;
  gap: var(--ae-space-2);
}

.ae-sync-item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: var(--ae-space-2) 0;
  border-bottom: 1px solid var(--ae-border-light);
  font-size: var(--ae-font-sm);
}

.ae-sync-item:last-child {
  border-bottom: none;
}

.ae-sync-item-status {
  width: 8px;
  height: 8px;
  border-radius: var(--ae-radius-full);
}

.ae-sync-item-status.pending { background: var(--ae-warning); }
.ae-sync-item-status.synced { background: var(--ae-success); }
.ae-sync-item-status.error { background: var(--ae-error); }

/* ============================================
   DRAWER DE PERFIL
   ============================================ */
.ae-profile-header {
  text-align: center;
  padding: var(--ae-space-6);
  border-bottom: 1px solid var(--ae-border-light);
}

.ae-profile-avatar {
  width: 80px;
  height: 80px;
  background: var(--ae-gradient-primary);
  color: var(--ae-text-inverse);
  border-radius: var(--ae-radius-full);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 32px;
  font-weight: 600;
  margin: 0 auto var(--ae-space-3);
}

.ae-profile-name {
  font-size: var(--ae-font-xl);
  font-weight: 600;
  color: var(--ae-text-primary);
  margin-bottom: var(--ae-space-1);
}

.ae-profile-role {
  font-size: var(--ae-font-sm);
  color: var(--ae-text-secondary);
}

.ae-profile-menu {
  padding: var(--ae-space-4);
}

.ae-profile-menu-item {
  display: flex;
  align-items: center;
  gap: var(--ae-space-3);
  padding: var(--ae-space-3) var(--ae-space-4);
  border-radius: var(--ae-radius-md);
  cursor: pointer;
  transition: background var(--ae-transition-fast);
  color: var(--ae-text-primary);
  text-decoration: none;
}

.ae-profile-menu-item:hover {
  background: var(--ae-bg-secondary);
}

.ae-profile-menu-item i {
  width: 20px;
  text-align: center;
  color: var(--ae-text-secondary);
}

.ae-profile-menu-item.danger {
  color: var(--ae-error);
}

.ae-profile-menu-item.danger i {
  color: var(--ae-error);
}

.ae-profile-divider {
  height: 1px;
  background: var(--ae-border-light);
  margin: var(--ae-space-2) 0;
}
</style>

<style>
/* ============================================
   FOOTER FIXO COM 3 BOTÕES
   ============================================ */
.ae-footer-bar {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  background: var(--ae-bg-surface);
  border-top: 1px solid var(--ae-border-light);
  padding: var(--ae-space-2) var(--ae-space-4);
  padding-bottom: calc(var(--ae-space-2) + var(--ae-safe-bottom));
  display: flex;
  justify-content: space-around;
  align-items: center;
  z-index: var(--ae-z-fixed);
  box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.05);
}

.ae-footer-btn {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: var(--ae-space-1);
  padding: var(--ae-space-2) var(--ae-space-4);
  background: none;
  border: none;
  color: var(--ae-text-secondary);
  cursor: pointer;
  transition: all var(--ae-transition-fast);
  border-radius: var(--ae-radius-md);
  min-width: 70px;
}

.ae-footer-btn:hover {
  color: var(--ae-primary);
  background: var(--ae-primary-bg);
}

.ae-footer-btn.active {
  color: var(--ae-primary);
}

.ae-footer-btn i {
  font-size: 20px;
}

.ae-footer-btn span {
  font-size: 10px;
  font-weight: 500;
}

/* ============================================
   DRAWER DE RESUMO FINANCEIRO
   ============================================ */
.ae-finance-summary {
  padding: var(--ae-space-4);
}

.ae-finance-card {
  background: var(--ae-gradient-primary);
  color: var(--ae-text-inverse);
  border-radius: var(--ae-radius-xl);
  padding: var(--ae-space-5);
  margin-bottom: var(--ae-space-4);
}

.ae-finance-card-title {
  font-size: var(--ae-font-sm);
  opacity: 0.9;
  margin-bottom: var(--ae-space-2);
}

.ae-finance-card-value {
  font-size: var(--ae-font-3xl);
  font-weight: 700;
}

.ae-finance-card-subtitle {
  font-size: var(--ae-font-xs);
  opacity: 0.8;
  margin-top: var(--ae-space-1);
}

.ae-finance-stats {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: var(--ae-space-3);
}

.ae-finance-stat {
  background: var(--ae-bg-secondary);
  border-radius: var(--ae-radius-lg);
  padding: var(--ae-space-4);
  text-align: center;
}

.ae-finance-stat-value {
  font-size: var(--ae-font-xl);
  font-weight: 700;
  color: var(--ae-text-primary);
}

.ae-finance-stat-label {
  font-size: var(--ae-font-xs);
  color: var(--ae-text-secondary);
  margin-top: var(--ae-space-1);
}

.ae-finance-stat.success .ae-finance-stat-value { color: var(--ae-success); }
.ae-finance-stat.warning .ae-finance-stat-value { color: var(--ae-warning); }
.ae-finance-stat.error .ae-finance-stat-value { color: var(--ae-error); }

/* ============================================
   DRAWER DE SCANNER QR
   ============================================ */
.ae-scanner-container {
  padding: var(--ae-space-4);
  text-align: center;
}

.ae-scanner-preview {
  width: 100%;
  max-width: 300px;
  aspect-ratio: 1;
  background: var(--ae-text-primary);
  border-radius: var(--ae-radius-xl);
  margin: 0 auto var(--ae-space-4);
  position: relative;
  overflow: hidden;
}

.ae-scanner-frame {
  position: absolute;
  inset: 20%;
  border: 2px solid var(--ae-primary);
  border-radius: var(--ae-radius-md);
}

.ae-scanner-frame::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 2px;
  background: var(--ae-primary);
  animation: ae-scan 2s ease-in-out infinite;
}

@keyframes ae-scan {
  0%, 100% { top: 0; }
  50% { top: calc(100% - 2px); }
}

.ae-scanner-instructions {
  font-size: var(--ae-font-sm);
  color: var(--ae-text-secondary);
  margin-bottom: var(--ae-space-4);
}

.ae-scanner-manual {
  display: flex;
  gap: var(--ae-space-2);
}

.ae-scanner-manual input {
  flex: 1;
  padding: var(--ae-space-3);
  border: 1px solid var(--ae-border);
  border-radius: var(--ae-radius-md);
  font-size: 16px;
}

/* ============================================
   DRAWER DE SUPORTE
   ============================================ */
.ae-support-options {
  padding: var(--ae-space-4);
}

.ae-support-card {
  display: flex;
  align-items: center;
  gap: var(--ae-space-4);
  padding: var(--ae-space-4);
  background: var(--ae-bg-secondary);
  border-radius: var(--ae-radius-lg);
  margin-bottom: var(--ae-space-3);
  cursor: pointer;
  transition: all var(--ae-transition-fast);
}

.ae-support-card:hover {
  background: var(--ae-primary-bg);
  transform: translateX(4px);
}

.ae-support-card-icon {
  width: 48px;
  height: 48px;
  background: var(--ae-primary);
  color: var(--ae-text-inverse);
  border-radius: var(--ae-radius-md);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 20px;
}

.ae-support-card-content {
  flex: 1;
}

.ae-support-card-title {
  font-size: var(--ae-font-base);
  font-weight: 600;
  color: var(--ae-text-primary);
}

.ae-support-card-description {
  font-size: var(--ae-font-xs);
  color: var(--ae-text-secondary);
}

.ae-support-faq {
  margin-top: var(--ae-space-6);
}

.ae-support-faq-title {
  font-size: var(--ae-font-sm);
  font-weight: 600;
  color: var(--ae-text-primary);
  margin-bottom: var(--ae-space-3);
}

.ae-faq-item {
  padding: var(--ae-space-3);
  border-bottom: 1px solid var(--ae-border-light);
  cursor: pointer;
}

.ae-faq-item:hover {
  background: var(--ae-bg-secondary);
}

.ae-faq-question {
  font-size: var(--ae-font-sm);
  color: var(--ae-text-primary);
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.ae-faq-answer {
  font-size: var(--ae-font-xs);
  color: var(--ae-text-secondary);
  margin-top: var(--ae-space-2);
  display: none;
}

.ae-faq-item.open .ae-faq-answer {
  display: block;
}
</style>

<!-- ============================================
     HTML DOS DRAWERS
     ============================================ -->

<!-- Overlay -->
<div class="ae-drawer-overlay" id="ae-drawer-overlay"></div>

<!-- DRAWER: Notificações -->
<aside class="ae-drawer ae-drawer-right" id="drawer-notifications" role="dialog" aria-labelledby="drawer-notifications-title">
  <div class="ae-drawer-header">
    <h2 class="ae-drawer-title" id="drawer-notifications-title">
      <i class="fas fa-bell"></i> Notificações
    </h2>
    <button class="ae-drawer-close" onclick="AEDrawers.close()" aria-label="Fechar">
      <i class="fas fa-times"></i>
    </button>
  </div>
  <div class="ae-drawer-body">
    <div class="ae-notification-list" id="notification-list">
      <!-- Notificações serão inseridas via JS -->
    </div>
  </div>
  <div class="ae-drawer-footer">
    <button class="ae-btn ae-btn-ghost ae-w-full" onclick="AEDrawers.markAllRead()">
      <i class="fas fa-check-double"></i> Marcar todas como lidas
    </button>
  </div>
</aside>

<!-- DRAWER: Busca Global -->
<aside class="ae-drawer ae-drawer-right" id="drawer-search" role="dialog" aria-labelledby="drawer-search-title">
  <div class="ae-drawer-header">
    <h2 class="ae-drawer-title" id="drawer-search-title">
      <i class="fas fa-search"></i> Busca Global
    </h2>
    <button class="ae-drawer-close" onclick="AEDrawers.close()" aria-label="Fechar">
      <i class="fas fa-times"></i>
    </button>
  </div>
  <div class="ae-search-container">
    <div class="ae-search-input-wrapper">
      <i class="fas fa-search"></i>
      <input type="text" class="ae-search-input" id="global-search-input" 
             placeholder="Buscar NF, fornecedor, escola..." 
             oninput="AEDrawers.search(this.value)">
    </div>
    <div class="ae-search-filters">
      <button class="ae-search-filter active" data-filter="all">Todos</button>
      <button class="ae-search-filter" data-filter="nf">Notas Fiscais</button>
      <button class="ae-search-filter" data-filter="fornecedor">Fornecedores</button>
      <button class="ae-search-filter" data-filter="escola">Escolas</button>
    </div>
  </div>
  <div class="ae-drawer-body ae-search-results" id="search-results">
    <p class="ae-text-center ae-text-secondary ae-p-6">Digite para buscar...</p>
  </div>
</aside>

<!-- DRAWER: Calendário -->
<aside class="ae-drawer ae-drawer-right" id="drawer-calendar" role="dialog" aria-labelledby="drawer-calendar-title">
  <div class="ae-drawer-header">
    <h2 class="ae-drawer-title" id="drawer-calendar-title">
      <i class="fas fa-calendar-alt"></i> Calendário
    </h2>
    <button class="ae-drawer-close" onclick="AEDrawers.close()" aria-label="Fechar">
      <i class="fas fa-times"></i>
    </button>
  </div>
  <div class="ae-calendar-header">
    <div class="ae-calendar-nav">
      <button class="ae-calendar-nav-btn" onclick="AEDrawers.prevMonth()">
        <i class="fas fa-chevron-left"></i>
      </button>
      <span class="ae-calendar-month" id="calendar-month">Dezembro 2025</span>
      <button class="ae-calendar-nav-btn" onclick="AEDrawers.nextMonth()">
        <i class="fas fa-chevron-right"></i>
      </button>
    </div>
  </div>
  <div class="ae-calendar-grid" id="calendar-grid">
    <!-- Calendário será gerado via JS -->
  </div>
  <div class="ae-calendar-events" id="calendar-events">
    <h3 class="ae-text-sm ae-font-semibold ae-mb-3">Eventos do Dia</h3>
    <!-- Eventos serão inseridos via JS -->
  </div>
</aside>

<!-- DRAWER: Status de Rede -->
<aside class="ae-drawer ae-drawer-right" id="drawer-network" role="dialog" aria-labelledby="drawer-network-title">
  <div class="ae-drawer-header">
    <h2 class="ae-drawer-title" id="drawer-network-title">
      <i class="fas fa-wifi"></i> Status de Rede
    </h2>
    <button class="ae-drawer-close" onclick="AEDrawers.close()" aria-label="Fechar">
      <i class="fas fa-times"></i>
    </button>
  </div>
  <div class="ae-drawer-body">
    <div class="ae-network-status">
      <div class="ae-network-icon online" id="network-icon">
        <i class="fas fa-wifi"></i>
      </div>
      <div class="ae-network-title" id="network-title">Conectado</div>
      <div class="ae-network-description" id="network-description">
        Todos os dados estão sincronizados com o servidor.
      </div>
    </div>
    <div class="ae-sync-queue" id="sync-queue" style="display:none;">
      <div class="ae-sync-queue-title">
        <i class="fas fa-clock"></i> Fila de Sincronização
      </div>
      <div id="sync-items">
        <!-- Itens pendentes serão inseridos via JS -->
      </div>
    </div>
  </div>
  <div class="ae-drawer-footer">
    <button class="ae-btn ae-btn-primary ae-w-full" onclick="AEDrawers.forceSync()">
      <i class="fas fa-sync"></i> Sincronizar Agora
    </button>
  </div>
</aside>

<!-- DRAWER: Perfil -->
<aside class="ae-drawer ae-drawer-right" id="drawer-profile" role="dialog" aria-labelledby="drawer-profile-title">
  <div class="ae-drawer-header">
    <h2 class="ae-drawer-title" id="drawer-profile-title">
      <i class="fas fa-user"></i> Minha Conta
    </h2>
    <button class="ae-drawer-close" onclick="AEDrawers.close()" aria-label="Fechar">
      <i class="fas fa-times"></i>
    </button>
  </div>
  <div class="ae-drawer-body">
    <div class="ae-profile-header">
      <div class="ae-profile-avatar" id="profile-avatar">U</div>
      <div class="ae-profile-name" id="profile-name">Usuário</div>
      <div class="ae-profile-role" id="profile-role">Analista</div>
    </div>
    <div class="ae-profile-menu">
      <a href="#" class="ae-profile-menu-item" onclick="AEDrawers.editProfile()">
        <i class="fas fa-user-edit"></i> Editar Perfil
      </a>
      <a href="#" class="ae-profile-menu-item" onclick="AEDrawers.changePassword()">
        <i class="fas fa-key"></i> Alterar Senha
      </a>
      <a href="#" class="ae-profile-menu-item" onclick="AEDrawers.preferences()">
        <i class="fas fa-cog"></i> Preferências
      </a>
      <div class="ae-profile-divider"></div>
      <a href="#" class="ae-profile-menu-item" onclick="AEDrawers.help()">
        <i class="fas fa-question-circle"></i> Ajuda
      </a>
      <a href="#" class="ae-profile-menu-item" onclick="AEDrawers.about()">
        <i class="fas fa-info-circle"></i> Sobre o Sistema
      </a>
      <div class="ae-profile-divider"></div>
      <a href="#" class="ae-profile-menu-item danger" onclick="AEDrawers.logout()">
        <i class="fas fa-sign-out-alt"></i> Sair
      </a>
    </div>
  </div>
</aside>

<!-- DRAWER BOTTOM: Resumo Financeiro -->
<aside class="ae-drawer ae-drawer-bottom" id="drawer-finance" role="dialog" aria-labelledby="drawer-finance-title">
  <div class="ae-drawer-handle"></div>
  <div class="ae-drawer-header">
    <h2 class="ae-drawer-title" id="drawer-finance-title">
      <i class="fas fa-chart-line"></i> Resumo Financeiro
    </h2>
    <button class="ae-drawer-close" onclick="AEDrawers.close()" aria-label="Fechar">
      <i class="fas fa-times"></i>
    </button>
  </div>
  <div class="ae-drawer-body">
    <div class="ae-finance-summary">
      <div class="ae-finance-card">
        <div class="ae-finance-card-title">Total Pago no Mês</div>
        <div class="ae-finance-card-value" id="finance-total">R$ 0,00</div>
        <div class="ae-finance-card-subtitle">Dezembro 2025</div>
      </div>
      <div class="ae-finance-stats">
        <div class="ae-finance-stat success">
          <div class="ae-finance-stat-value" id="finance-approved">0</div>
          <div class="ae-finance-stat-label">NFs Aprovadas</div>
        </div>
        <div class="ae-finance-stat warning">
          <div class="ae-finance-stat-value" id="finance-pending">0</div>
          <div class="ae-finance-stat-label">Pendentes</div>
        </div>
        <div class="ae-finance-stat">
          <div class="ae-finance-stat-value" id="finance-empenho">R$ 0</div>
          <div class="ae-finance-stat-label">Saldo Empenho</div>
        </div>
        <div class="ae-finance-stat error">
          <div class="ae-finance-stat-value" id="finance-glosas">R$ 0</div>
          <div class="ae-finance-stat-label">Glosas</div>
        </div>
      </div>
    </div>
  </div>
</aside>

<!-- DRAWER BOTTOM: Scanner QR -->
<aside class="ae-drawer ae-drawer-bottom" id="drawer-scanner" role="dialog" aria-labelledby="drawer-scanner-title">
  <div class="ae-drawer-handle"></div>
  <div class="ae-drawer-header">
    <h2 class="ae-drawer-title" id="drawer-scanner-title">
      <i class="fas fa-qrcode"></i> Scanner de NF
    </h2>
    <button class="ae-drawer-close" onclick="AEDrawers.close()" aria-label="Fechar">
      <i class="fas fa-times"></i>
    </button>
  </div>
  <div class="ae-drawer-body">
    <div class="ae-scanner-container">
      <div class="ae-scanner-preview" id="scanner-preview">
        <div class="ae-scanner-frame"></div>
      </div>
      <p class="ae-scanner-instructions">
        Posicione o QR Code da Nota Fiscal dentro da área de leitura
      </p>
      <div class="ae-scanner-manual">
        <input type="text" placeholder="Ou digite a chave de acesso..." id="manual-key-input">
        <button class="ae-btn ae-btn-primary" onclick="AEDrawers.searchByKey()">
          <i class="fas fa-search"></i>
        </button>
      </div>
    </div>
  </div>
</aside>

<!-- DRAWER BOTTOM: Suporte -->
<aside class="ae-drawer ae-drawer-bottom" id="drawer-support" role="dialog" aria-labelledby="drawer-support-title">
  <div class="ae-drawer-handle"></div>
  <div class="ae-drawer-header">
    <h2 class="ae-drawer-title" id="drawer-support-title">
      <i class="fas fa-headset"></i> Suporte
    </h2>
    <button class="ae-drawer-close" onclick="AEDrawers.close()" aria-label="Fechar">
      <i class="fas fa-times"></i>
    </button>
  </div>
  <div class="ae-drawer-body">
    <div class="ae-support-options">
      <div class="ae-support-card" onclick="AEDrawers.openManual()">
        <div class="ae-support-card-icon"><i class="fas fa-book"></i></div>
        <div class="ae-support-card-content">
          <div class="ae-support-card-title">Manual do Sistema</div>
          <div class="ae-support-card-description">Guia completo de uso</div>
        </div>
        <i class="fas fa-chevron-right ae-text-tertiary"></i>
      </div>
      <div class="ae-support-card" onclick="AEDrawers.openChat()">
        <div class="ae-support-card-icon"><i class="fas fa-comments"></i></div>
        <div class="ae-support-card-content">
          <div class="ae-support-card-title">Chat com Suporte</div>
          <div class="ae-support-card-description">Fale com nossa equipe</div>
        </div>
        <i class="fas fa-chevron-right ae-text-tertiary"></i>
      </div>
      <div class="ae-support-card" onclick="AEDrawers.reportBug()">
        <div class="ae-support-card-icon" style="background:var(--ae-warning);">
          <i class="fas fa-bug"></i>
        </div>
        <div class="ae-support-card-content">
          <div class="ae-support-card-title">Reportar Problema</div>
          <div class="ae-support-card-description">Encontrou um bug?</div>
        </div>
        <i class="fas fa-chevron-right ae-text-tertiary"></i>
      </div>
      
      <div class="ae-support-faq">
        <div class="ae-support-faq-title">Perguntas Frequentes</div>
        <div class="ae-faq-item" onclick="this.classList.toggle('open')">
          <div class="ae-faq-question">
            Como cadastrar uma nova NF?
            <i class="fas fa-chevron-down"></i>
          </div>
          <div class="ae-faq-answer">
            Acesse o menu Financeiro > Notas Fiscais e clique em "Nova NF".
          </div>
        </div>
        <div class="ae-faq-item" onclick="this.classList.toggle('open')">
          <div class="ae-faq-question">
            Como funciona o atesto digital?
            <i class="fas fa-chevron-down"></i>
          </div>
          <div class="ae-faq-answer">
            O atesto digital permite aprovar NFs conferidas diretamente pelo sistema.
          </div>
        </div>
        <div class="ae-faq-item" onclick="this.classList.toggle('open')">
          <div class="ae-faq-question">
            Posso usar offline?
            <i class="fas fa-chevron-down"></i>
          </div>
          <div class="ae-faq-answer">
            Sim! O sistema funciona offline e sincroniza quando a conexão retornar.
          </div>
        </div>
      </div>
    </div>
  </div>
</aside>

<!-- FOOTER BAR -->
<footer class="ae-footer-bar" id="ae-footer-bar">
  <button class="ae-footer-btn" onclick="AEDrawers.open('finance')" aria-label="Resumo Financeiro">
    <i class="fas fa-chart-pie"></i>
    <span>Resumo</span>
  </button>
  <button class="ae-footer-btn" onclick="AEDrawers.open('scanner')" aria-label="Scanner QR">
    <i class="fas fa-qrcode"></i>
    <span>Scanner</span>
  </button>
  <button class="ae-footer-btn" onclick="AEDrawers.open('support')" aria-label="Suporte">
    <i class="fas fa-headset"></i>
    <span>Suporte</span>
  </button>
</footer>

<!-- ============================================
     JAVASCRIPT DOS DRAWERS
     ============================================ -->
<script>
/**
 * AEDrawers - Controlador dos Drawers
 * Alimentação Escolar CRE-PP
 */
var AEDrawers = (function() {
  'use strict';
  
  var state = {
    activeDrawer: null,
    notifications: [],
    searchDebounce: null,
    currentMonth: new Date()
  };
  
  var elements = {};
  
  /**
   * Inicializa os drawers
   */
  function init() {
    cacheElements();
    bindEvents();
    loadNotifications();
    renderCalendar();
    updateNetworkStatus();
    console.log('AEDrawers inicializado');
  }
  
  function cacheElements() {
    elements.overlay = document.getElementById('ae-drawer-overlay');
    elements.drawers = {
      notifications: document.getElementById('drawer-notifications'),
      search: document.getElementById('drawer-search'),
      calendar: document.getElementById('drawer-calendar'),
      network: document.getElementById('drawer-network'),
      profile: document.getElementById('drawer-profile'),
      finance: document.getElementById('drawer-finance'),
      scanner: document.getElementById('drawer-scanner'),
      support: document.getElementById('drawer-support')
    };
  }
  
  function bindEvents() {
    // Overlay click
    elements.overlay && elements.overlay.addEventListener('click', close);
    
    // Keyboard
    document.addEventListener('keydown', function(e) {
      if (e.key === 'Escape' && state.activeDrawer) {
        close();
      }
    });
    
    // Network status
    window.addEventListener('online', updateNetworkStatus);
    window.addEventListener('offline', updateNetworkStatus);
  }
  
  /**
   * Abre um drawer
   */
  function open(drawerId) {
    if (state.activeDrawer) {
      close();
    }
    
    var drawer = elements.drawers[drawerId];
    if (!drawer) return;
    
    elements.overlay.classList.add('active');
    drawer.classList.add('active');
    state.activeDrawer = drawerId;
    
    // Focus trap
    var firstFocusable = drawer.querySelector('button, input, [tabindex]:not([tabindex="-1"])');
    if (firstFocusable) firstFocusable.focus();
    
    // Callbacks específicos
    if (drawerId === 'search') {
      setTimeout(function() {
        document.getElementById('global-search-input').focus();
      }, 300);
    }
  }
  
  /**
   * Fecha o drawer ativo
   */
  function close() {
    if (!state.activeDrawer) return;
    
    var drawer = elements.drawers[state.activeDrawer];
    if (drawer) {
      drawer.classList.remove('active');
    }
    elements.overlay.classList.remove('active');
    state.activeDrawer = null;
  }
  
  /**
   * Carrega notificações
   */
  function loadNotifications() {
    state.notifications = [
      { id: 1, type: 'info', title: 'Nova NF Recebida', text: 'NF 12345 do fornecedor ABC aguarda conferência.', time: 'Há 5 min', unread: true },
      { id: 2, type: 'success', title: 'Atesto Concluído', text: 'Lote de NFs atestado com sucesso.', time: 'Há 1 hora', unread: false },
      { id: 3, type: 'warning', title: 'Empenho Próximo do Limite', text: 'Empenho 2025NE001234 atingiu 90% do valor.', time: 'Há 2 horas', unread: true }
    ];
    renderNotifications();
  }
  
  function renderNotifications() {
    var container = document.getElementById('notification-list');
    if (!container) return;
    
    if (state.notifications.length === 0) {
      container.innerHTML = '<div class="ae-notification-empty"><i class="fas fa-bell-slash"></i><p>Nenhuma notificação</p></div>';
      return;
    }
    
    container.innerHTML = state.notifications.map(function(n) {
      return '<div class="ae-notification-item ' + (n.unread ? 'unread' : '') + '" data-id="' + n.id + '">' +
        '<div class="ae-notification-icon ' + n.type + '"><i class="fas fa-' + getNotificationIcon(n.type) + '"></i></div>' +
        '<div class="ae-notification-content">' +
          '<div class="ae-notification-title">' + n.title + '</div>' +
          '<div class="ae-notification-text">' + n.text + '</div>' +
          '<div class="ae-notification-time">' + n.time + '</div>' +
        '</div>' +
      '</div>';
    }).join('');
  }
  
  function getNotificationIcon(type) {
    var icons = { info: 'info-circle', success: 'check-circle', warning: 'exclamation-triangle', error: 'times-circle' };
    return icons[type] || 'bell';
  }
  
  function markAllRead() {
    state.notifications.forEach(function(n) { n.unread = false; });
    renderNotifications();
  }
  
  /**
   * Busca global
   */
  function search(query) {
    clearTimeout(state.searchDebounce);
    state.searchDebounce = setTimeout(function() {
      performSearch(query);
    }, 300);
  }
  
  function performSearch(query) {
    var container = document.getElementById('search-results');
    if (!query || query.length < 2) {
      container.innerHTML = '<p class="ae-text-center ae-text-secondary ae-p-6">Digite para buscar...</p>';
      return;
    }
    
    // Simulação de resultados
    container.innerHTML = '<div class="ae-search-result-item"><div class="ae-search-result-icon"><i class="fas fa-file-invoice"></i></div><div class="ae-search-result-info"><div class="ae-search-result-title">NF 12345</div><div class="ae-search-result-meta">Fornecedor ABC • R$ 1.500,00</div></div></div>';
  }
  
  /**
   * Calendário
   */
  function renderCalendar() {
    var grid = document.getElementById('calendar-grid');
    if (!grid) return;
    
    var weekdays = ['Dom', 'Seg', 'Ter', 'Qua', 'Qui', 'Sex', 'Sáb'];
    var html = weekdays.map(function(d) { return '<div class="ae-calendar-weekday">' + d + '</div>'; }).join('');
    
    var today = new Date();
    var year = state.currentMonth.getFullYear();
    var month = state.currentMonth.getMonth();
    var firstDay = new Date(year, month, 1).getDay();
    var daysInMonth = new Date(year, month + 1, 0).getDate();
    
    for (var i = 0; i < firstDay; i++) {
      html += '<div class="ae-calendar-day other-month"></div>';
    }
    
    for (var day = 1; day <= daysInMonth; day++) {
      var isToday = day === today.getDate() && month === today.getMonth() && year === today.getFullYear();
      var hasEvent = [5, 12, 18, 25].indexOf(day) > -1;
      html += '<div class="ae-calendar-day' + (isToday ? ' today' : '') + (hasEvent ? ' has-event' : '') + '">' + day + '</div>';
    }
    
    grid.innerHTML = html;
    
    var monthNames = ['Janeiro', 'Fevereiro', 'Março', 'Abril', 'Maio', 'Junho', 'Julho', 'Agosto', 'Setembro', 'Outubro', 'Novembro', 'Dezembro'];
    document.getElementById('calendar-month').textContent = monthNames[month] + ' ' + year;
  }
  
  function prevMonth() {
    state.currentMonth.setMonth(state.currentMonth.getMonth() - 1);
    renderCalendar();
  }
  
  function nextMonth() {
    state.currentMonth.setMonth(state.currentMonth.getMonth() + 1);
    renderCalendar();
  }
  
  /**
   * Status de rede
   */
  function updateNetworkStatus() {
    var isOnline = navigator.onLine;
    var icon = document.getElementById('network-icon');
    var title = document.getElementById('network-title');
    var desc = document.getElementById('network-description');
    
    if (icon) {
      icon.className = 'ae-network-icon ' + (isOnline ? 'online' : 'offline');
      icon.innerHTML = '<i class="fas fa-' + (isOnline ? 'wifi' : 'wifi-slash') + '"></i>';
    }
    if (title) title.textContent = isOnline ? 'Conectado' : 'Sem Conexão';
    if (desc) desc.textContent = isOnline ? 'Todos os dados estão sincronizados.' : 'Trabalhando offline. Os dados serão sincronizados quando a conexão retornar.';
  }
  
  function forceSync() {
    console.log('Forçando sincronização...');
    // Implementar lógica de sync
  }
  
  // Funções de perfil
  function editProfile() { console.log('Editar perfil'); close(); }
  function changePassword() { console.log('Alterar senha'); close(); }
  function preferences() { console.log('Preferências'); close(); }
  function help() { console.log('Ajuda'); close(); }
  function about() { console.log('Sobre'); close(); }
  function logout() { 
    if (confirm('Deseja realmente sair?')) {
      console.log('Logout');
      close();
    }
  }
  
  // Funções de suporte
  function openManual() { console.log('Abrindo manual'); }
  function openChat() { console.log('Abrindo chat'); }
  function reportBug() { console.log('Reportar bug'); }
  
  // Scanner
  function searchByKey() {
    var key = document.getElementById('manual-key-input').value;
    console.log('Buscando chave:', key);
  }
  
  // API Pública
  return {
    init: init,
    open: open,
    close: close,
    search: search,
    markAllRead: markAllRead,
    prevMonth: prevMonth,
    nextMonth: nextMonth,
    forceSync: forceSync,
    editProfile: editProfile,
    changePassword: changePassword,
    preferences: preferences,
    help: help,
    about: about,
    logout: logout,
    openManual: openManual,
    openChat: openChat,
    reportBug: reportBug,
    searchByKey: searchByKey
  };
})();

// Inicialização
document.addEventListener('DOMContentLoaded', AEDrawers.init);
</script>
